"use strict";(globalThis.webpackChunkmy_website=globalThis.webpackChunkmy_website||[]).push([[130],{7735(n){n.exports=JSON.parse('{"archive":{"blogPosts":[{"id":"server-deploy-project","metadata":{"permalink":"/blog/server-deploy-project","source":"@site/blog/\u642d\u5efa\u4e00\u4e2a\u4e2a\u4eba\u535a\u5ba2\u7f51\u7ad9.md","title":"\u642d\u5efa\u4e2a\u4eba\u7f51\u7ad9","description":"\u5173\u4e8e\u642d\u5efa\u4e2a\u4eba\u7f51\u7ad9\u8fd9\u4ef6\u4e8b\uff0c24\u5e74\u65f6\u4fbf\u5728\u8ba1\u5212\u4e86\uff0c\u81f3\u4e8e\u539f\u56e0\uff1a\u5927\u90e8\u5206\u662f\u7126\u8651\uff0c\u60f3\u627e\u5230\u4e00\u4e2a\u6280\u672f\u7684\u7a81\u7834\u53e3\u3002\u8fd8\u6709\u4e00\u4e2a\u91cd\u8981\u7684\u539f\u56e0\u662f\u60f3\u7ed9\u672a\u6765\u7559\u4e0b\u4e00\u4e9b\u56de\u5fc6\uff0c\u5766\u8bda\u7684\u8bb0\u5f55\u81ea\u5df1\u3002","date":"2026-01-21T00:00:00.000Z","tags":[{"inline":true,"label":"\u6280\u672f","permalink":"/blog/tags/\u6280\u672f"},{"inline":true,"label":"\u670d\u52a1\u5668","permalink":"/blog/tags/\u670d\u52a1\u5668"},{"inline":true,"label":"\u90e8\u7f72","permalink":"/blog/tags/\u90e8\u7f72"}],"readingTime":3.86,"hasTruncateMarker":true,"authors":[],"frontMatter":{"title":"\u642d\u5efa\u4e2a\u4eba\u7f51\u7ad9","slug":"server-deploy-project","tags":["\u6280\u672f","\u670d\u52a1\u5668","\u90e8\u7f72"],"keywords":["\u670d\u52a1\u5668","\u90e8\u7f72","\u9879\u76ee"],"date":"2026-01-21T00:00:00.000Z"},"unlisted":false,"nextItem":{"title":"Nextjs\u642d\u5efa\u4e2a\u4eba\u7f51\u7ad9","permalink":"/blog/build-personal-website"}},"content":"\x3c!-- truncate --\x3e\\n> \u5173\u4e8e\u642d\u5efa\u4e2a\u4eba\u7f51\u7ad9\u8fd9\u4ef6\u4e8b\uff0c24\u5e74\u65f6\u4fbf\u5728\u8ba1\u5212\u4e86\uff0c\u81f3\u4e8e\u539f\u56e0\uff1a\u5927\u90e8\u5206\u662f\u7126\u8651\uff0c\u60f3\u627e\u5230\u4e00\u4e2a\u6280\u672f\u7684\u7a81\u7834\u53e3\u3002\u8fd8\u6709\u4e00\u4e2a\u91cd\u8981\u7684\u539f\u56e0\u662f\u60f3\u7ed9\u672a\u6765\u7559\u4e0b\u4e00\u4e9b\u56de\u5fc6\uff0c\u5766\u8bda\u7684\u8bb0\u5f55\u81ea\u5df1\u3002\\n\\n## \u5f00\u59cb\u524d \\n\u4e00\u76f4\u4ee5\u6765\uff0c\u7f16\u7a0b\u5bf9\u4e8e\u6211\u6765\u8bf4\u90fd\u53ea\u662f\u4e3a\u4e86\u6709\u53e3\u996d\u5403\uff0c\u6211\u5bf9\u751f\u6d3b\u7684\u70ed\u60c5\u8fdc\u8fdc\u5927\u4e8e\u7f16\u7a0b\u3002\u8eab\u8fb9\u5f88\u591a\u670b\u53cb\u4e5f\u8ba4\u4e3a\u6211\u4e0d\u662f\u4e2a\u6b63\u7ecf\u7684\u7a0b\u5e8f\u5458\u3002\u53ea\u4f1a\u5355\u4e00\u7684\u6280\u672f\u6808\uff0c\u60f3\u8981\u505a\u4e00\u4e2a\u4e2a\u4eba\u7f51\u7ad9\u5bf9\u4e8e\u6211\u6765\u8bf4\u5f88\u6709\u6311\u6218\uff0c\u56e0\u6b64\u5728\u8fd9\u4e2a\u8fc7\u7a0b\u4e2d\\n\u8e29\u4e86\u5f88\u591a\u5751\uff0c\u4e5f\u6d6a\u8d39\u4e86\u5f88\u591a\u65f6\u95f4\u3002\u6700\u540e\u5b8c\u7f8e\u7684\u8be0\u91ca\u4e86\uff1a\u4e3a\u4e86\u4e00\u789f\u918b\u5305\u4e86\u987f\u997a\u5b50\u3002\u88ab\u52a8\u5b66\u4e86\u4e00\u8111\u5b50\u7684\u65b0\u77e5\u8bc6\u3002\u8fd9\u7bc7\u6587\u7ae0\u8bb0\u5f55\u7684\u662f\u8e29\u8fc7\u7684\u5751\u3002**\u5982\u679c\u4f60\u4e5f\u60f3\u642d\u5efa\u4e00\u4e2a\u7f51\u7ad9\uff0c\u4ee5\u4e0b\u5185\u5bb9\u6211\u613f\u79f0\u4e4b\u4e3a\u201c\u8f6e\u6905\u201d\u6559\u5b66\u3002**\\n\\n:::success \u6e29\u99a8\u63d0\u793a\\n\u5982\u679c\u4f60\u53ea\u60f3\u642d\u5efa\u4e00\u4e2a\u7f51\u7ad9\uff0c\u4f60\u5b8c\u5168\u6ca1\u5fc5\u8981\u4ece\u5934\u770b\u5230\u5c3e\\n:::\\n\\n### \u4e00. \u5929\u5d29\u5f00\u5c40\\n\u6709\u4e86\u642d\u5efa\u7f51\u7ad9\u7684\u60f3\u6cd5\u540e\uff0c\u5f00\u59cb\u8054\u60f3\u5230\u70ab\u9177\u7684\u9875\u9762\uff0c\u6700\u65b0\u7684\u6280\u672f\u6808\uff0c\u4ea4\u4e92\u4f53\u9a8c\uff0c\u540e\u7aef\u3002\u6700\u540e\u53d1\u73b0\u81ea\u5df1\u9664\u4e86\u4e00\u70b9\u524d\u7aef\u7684\u77e5\u8bc6\uff0c\u5565\u4e5f\u4e0d\u4f1a\u3002\u81f3\u6b64\u9677\u5165\u7126\u8651\u4e0e\u8ff7\u832b\u3002\u4e8e\u662f\u5f00\u59cb\u4ee5\u4e0b\u5c1d\u8bd5\uff1a\\n#### 1. nextjs \u642d\u5efa\u4e2a\u4eba\u535a\u5ba2\\n\u5c31\u53cd\u6b63\u5565\u4e5f\u4e0d\u4f1a\uff0c\u8ddf\u7740\u89c6\u9891**\u5e72\u4e2d\u5b66**\u5457\uff5e\\n<img src=\\"/img/blog/build-personal-website/ganzhongxue.png\\" alt=\\"\u65e0\u6cd5\u52a0\u8f7d\\" width=\\"500\\" />\\nyoutube\u627e\u4e86\u4e2a\u89c6\u9891\\n\\n\\n#### 2. \u81ea\u5df1\u8bbe\u8ba1\u4e2a\u4eba\u535a\u5ba2\\n#### 3. \u5dee\u70b9\u628a\u81ea\u5df1\u6298\u817e\u6ca1\u4e86\\n### \u4e8c. \u5076\u7136\u5237\u5230\u7684\u535a\u5ba2\u7f51\u7ad9\\n### \u4e09. \u6211\u609f\u4e86\uff0c\u9002\u5408\u81ea\u5df1\u7684\u624d\u662f\u6700\u597d\u7684\\n### \u56db. \u6700\u540e\uff1a\u8fd9\u4e00\u523b\u4f60\u5f97\u5230\u4e86\u4ec0\u4e48\u6559\u8bad\\n\\n\\n\\n\\n\\n## 1.\u6b65\u9aa4\\n - \u767b\u5f55\u670d\u52a1\u5668\\n - \u5b89\u88c5\u5fc5\u8981\u7684\u8f6f\u4ef6\uff08\u5982Git\u3001Node.js\u7b49\uff09\\n - \u514b\u9686\u9879\u76ee\u4ee3\u7801\u5230\u670d\u52a1\u5668\\n - \u5b89\u88c5\u9879\u76ee\u4f9d\u8d56\\n - \u914d\u7f6e\u9879\u76ee\u73af\u5883\u53d8\u91cf\\n - \u542f\u52a8\u9879\u76ee\\n\\n## 2.\u6267\u884c\\n### 2.1 \u767b\u5f55\u670d\u52a1\u5668\\n### 2.3 \u514b\u9686\u9879\u76ee\u4ee3\u7801\u5230\u670d\u52a1\u5668\\n:::tip\\n\u5982\u679c\u4f60\u5df2\u7ecf\u77e5\u9053\u5982\u4f55\u5c06\u6253\u5305\u6587\u4ef6dist\u6216build\u585e\u8fdb\u670d\u52a1\u5668\uff0c\u4ee5\u4e0b\u5185\u5bb9\u5c06\u5168\u662f\u5e9f\u8bdd\\n:::\\n\u5c06\u6253\u5305\u6587\u4ef6\u653e\u5230\u670d\u52a1\u5668\u7684\u65b9\u6848\u6709\u591a\u79cd\uff0c\u5982\u5728\u670d\u52a1\u5668\u4e2d `/var/www/projects`\u76ee\u5f55\u4e0b\u514b\u9686-\u5b89\u88c5-\u6253\u5305\u9879\u76ee\uff0c\u6216\u662f\u76f4\u63a5\u5728\u8be5\u76ee\u5f55\u5730\u5740\u4e0b\u653e\u9879\u76ee\u53d1\u5305\u6587\u4ef6\u90fd\u662f\u53ef\u4ee5\u7684\uff0c\u7136\u800c\u5728\u5185\u5b58\u6bd4\u8f83\u5c0f\u7684\u670d\u52a1\u5668\uff08\u59821GB\u62162GB\u5185\u5b58\uff09\u4e2d\u8fd0\u884c`npm run build`\u7ecf\u5e38\u5bb9\u6613\u56e0\u4e3a\u5185\u5b58\u4e0d\u8db3\u7684\u539f\u56e0\u5bfc\u81f4\u7cfb\u7edf\u6302\u6389\u3002\\n\u89e3\u51b3\u65b9\u6848\uff1a\u7a77\u9b3c\u65b9\u6848\uff08\u94b1\u8981\u82b1\u5728\u5200\u5203\u4e0a\uff09`Github Actions`\uff1a\u6bcf\u6b21\u63d0\u4ea4\u4ee3\u7801\u65f6\uff0cgithub\u81ea\u52a8\u5c06\u4f60\u7684\u9879\u76ee\u4ee3\u7801\u6253\u5305\u5e76\u63a8\u9001\u5230\u4e00\u4e2adeploy\u5206\u652f\uff0c\u4f60\u53ea\u9700\u8981\u5728\u670d\u52a1\u5668\u4e0a\u514b\u9686\u90a3\u4e2adeploy\u5206\u652f\u5373\u53ef\u3002\u5177\u4f53\u6b65\u9aa4\uff1a\\n1. \u5728\u9879\u76ee\u6839\u76ee\u5f55\u521b\u5efa `.github/workflows/deploy.yml` \u6587\u4ef6\u3002\\n```yml\\nname: Deploy Blog\\n\\non:\\n  push:\\n    branches:\\n      - main  # \u5f53\u4f60\u5411 main \u5206\u652f\u63a8\u9001\u4ee3\u7801\u65f6\u89e6\u53d1\\n\\njobs:\\n  build-and-deploy:\\n    runs-on: ubuntu-latest\\n    steps:\\n      - name: Checkout\\n        uses: actions/checkout@v4\\n\\n      - name: Install and Build\\n        run: |\\n          npm install\\n          npm run build  # \u8fd9\u91cc\u6267\u884c\u6253\u5305\u547d\u4ee4\uff0c\u751f\u6210 build \u6587\u4ef6\u5939\\n\\n      - name: Deploy to Branch\\n        uses: JamesIves/github-pages-deploy-action@v4\\n        with:\\n          folder: build    # \u6253\u5305\u4ea7\u7269\u6240\u5728\u7684\u76ee\u5f55\\n          branch: deploy   # \u5c06\u4ea7\u7269\u63a8\u9001\u5230\u8fd9\u4e2a\u5206\u652f\\n```\\n2. \u914d\u7f6e\u5b83\u5728\u6bcf\u6b21\u63a8\u9001\u4ee3\u7801\u65f6\uff0c\u81ea\u52a8\u5e2e\u4f60\u7f16\u8bd1\u5e76\u628abuild\u6587\u4ef6\u5939\u63a8\u9001\u5230\u4e00\u4e2agh-pages\u6216deploy\u5206\u652f\u3002\u7b2c\u4e00\u6b21\u63d0\u4ea4`git push origin main`\u65f6,\u4f60\u4f1a\u770b\u5230github\u4ed3\u5e93\u4e2dActions\u4e2d\u4f1a\u81ea\u52a8\u8fd0\u884c\u4e00\u6b21\u90e8\u7f72\u6d41\u7a0b\u3002\u5982\u679c\u4f60\u5931\u8d25\u4e86\uff0c\u5927\u6982\u662f\u56e0\u4e3a\u6743\u9650\u95ee\u9898\uff0c\u8fd9\u65f6\u5019\u4f60\u9700\u8981\u53bb\u5f00\u542f\u6743\u9650\uff1a\u9009\u62e9setting->actions\uff08general\uff09->workflow permissions->read and write permissions->save\u3002\u518d\u56de\u5230actions\u91cd\u8dd1\u3002\\n3. \u670d\u52a1\u5668\u64cd\u4f5c\uff1a\u4f60\u53ea\u9700\u8981\u5728\u670d\u52a1\u5668\u4e0a\u514b\u9686\u90a3\u4e2adeploy\u5206\u652f\u5373\u53ef\u3002\\n\\n\u5404\u79cd\u95ee\u9898\uff1a\\n1.\u7aef\u53e3\u88ab\u5360\u7528\\n2.\u9632\u706b\u5899\\n3.\u5730\u5740\u8f6c\u53d1\u9519\u8bef\\n\\n### \u535a\u5ba2\u90e8\u7f72\u9047\u5230\u7684\u95ee\u9898\u4ee5\u53ca\u89e3\u51b3\\n#### 1.\u9879\u76ee\u95ee\u9898\\n\u7ad9\u70b9\u662f\u57fa\u4e8e Docusaurus \u7684\u9759\u6001\u7f51\u7ad9\u3002Docusaurus + React + TypeScript\\n1. \u90e8\u7f72\u5230\u670d\u52a1\u5668\u540e\uff0c\u7f51\u9875\u4e2d\u7684\u56fe\u7247\u52a0\u8f7d\u4e0d\u51fa\u6765\\n\\n\\n\\n\\n3. \u4e00\u4e2a\u5c0f\u63d0\u9192\uff08\u5173\u4e8e\u7eed\u671f\uff09\\n\u56e0\u4e3a\u6211\u4eec\u8fd9\u6b21\u662f\u88ab\u8feb\u4f7f\u7528\u4e86 DNS \u624b\u52a8\u9a8c\u8bc1\u6a21\u5f0f\uff08--manual\uff09\uff0c\u8fd9\u610f\u5473\u7740 3 \u4e2a\u6708\u540e\u8bc1\u4e66\u5230\u671f\u65f6\uff0ccertbot renew \u81ea\u52a8\u7eed\u671f\u547d\u4ee4\u65e0\u6cd5\u81ea\u52a8\u5b8c\u6210\uff08\u56e0\u4e3a\u5b83\u6ca1\u6cd5\u81ea\u52a8\u53bb\u6539\u4f60\u7684\u57df\u540d\u89e3\u6790\u8bb0\u5f55\uff09\u3002\\n\\n\u4f60\u9700\u8981\u8bb0\u4e2a\u65e5\u5386\u63d0\u9192\uff08\u6bd4\u5982 2026\u5e744\u670810\u65e5\u5de6\u53f3\uff09\uff0c\u5230\u65f6\u5019\u518d\u8fd0\u884c\u4e00\u904d\u4eca\u5929\u8fd9\u4e2a\u547d\u4ee4\uff1a\\nsudo certbot certonly --manual --preferred-challenges dns -d lastwhisper.online -d www.lastwhisper.online\\n\\n\\n\\ncat /var/log/blog_deploy.log\\n\u624b\u52a8\u8dd1\u811a\u672c\\n/root/deploy_blog.sh"},{"id":"build-personal-website","metadata":{"permalink":"/blog/build-personal-website","source":"@site/blog/Nextjs\u642d\u5efa\u4e2a\u4eba\u7f51\u7ad9.md","title":"Nextjs\u642d\u5efa\u4e2a\u4eba\u7f51\u7ad9","description":"\u4f60\u597d\uff01\u8fd9\u662f\u6211\u7528Next.js\u642d\u5efa\u7684\u7b2c\u4e00\u4e2a\u9879\u76eeblogs\ud83d\udca1\uff0c\u8bbf\u95ee\ud83e\ude9c\u539f\u4f5c\u8005\u89c6\u9891\u5730\u5740","date":"2024-10-12T00:00:00.000Z","tags":[{"inline":true,"label":"\u6280\u672f","permalink":"/blog/tags/\u6280\u672f"},{"inline":true,"label":"nextjs","permalink":"/blog/tags/nextjs"},{"inline":true,"label":"prisma","permalink":"/blog/tags/prisma"},{"inline":true,"label":"vercel","permalink":"/blog/tags/vercel"}],"readingTime":13.75,"hasTruncateMarker":true,"authors":[],"frontMatter":{"title":"Nextjs\u642d\u5efa\u4e2a\u4eba\u7f51\u7ad9","slug":"build-personal-website","tags":["\u6280\u672f","nextjs","prisma","vercel"],"keywords":["next.js","\u4e2a\u4eba\u535a\u5ba2"],"date":"2024-10-12T00:00:00.000Z","image":"/img/blog/build-personal-website/nextjs-blog.png"},"unlisted":false,"prevItem":{"title":"\u642d\u5efa\u4e2a\u4eba\u7f51\u7ad9","permalink":"/blog/server-deploy-project"}},"content":"\x3c!-- truncate --\x3e\\n# \u4f7f\u7528next.js\u642d\u5efa\u4e00\u4e2a\u514d\u8d39\u7684\u535a\u5ba2\u7f51\u7ad9\\n\u4f60\u597d\uff01\u8fd9\u662f\u6211\u7528Next.js\u642d\u5efa\u7684\u7b2c\u4e00\u4e2a\u9879\u76ee[blogs\ud83d\udca1](https://blogs-sable-zeta.vercel.app)\uff0c\u8bbf\u95ee\ud83e\ude9c[\u539f\u4f5c\u8005\u89c6\u9891\u5730\u5740](https://www.youtube.com/watch?v=y7JCnfbETPs)\\n\\n>\u5b8c\u6210\u9879\u76ee\u7684\u8fc7\u7a0b\u4e2d\uff0c\u6211\u638c\u63e1\u4e86 `react`\uff0c`next.js`\uff0c`typeScript`\uff0c`tailwindcss`\uff0c[`prisma(\u6570\u636e\u5e93)`](https://www.prisma.io/docs/orm/more/help-and-troubleshooting/help-articles/nextjs-prisma-client-dev-practices) [`kinde(\u767b\u5f55\u6388\u6743)`](https://kinde.com)\uff0c[`vercel(\u90e8\u7f72)`](https://vercel.com/)\u7684\u90e8\u5206\u77e5\u8bc6\ud83c\udf7b\\n>\u642d\u5efa\u90e8\u7f72\u8fc7\u7a0b\u6211\u68b3\u7406\u5e76\u603b\u7ed3\u6210\u4e86\u6587\u6863\uff0c\u5e0c\u671b\u4f60\u80fd\u559c\u6b22 ~\\n## \u4e00. \u642d\u5efa\u8fc7\u7a0b\\n### 1. \u521b\u5efa\u5e76\u521d\u59cb\u5316\u9879\u76ee\\n##### 1.1 \u521b\u5efa\u4e00\u4e2a`my-blogs`\u7684\u6587\u4ef6\u5939\uff0c\u5728`my-blogs`\u4e2d\u521b\u5efanext.js\u5e94\u7528\uff1a\\n```\\nnpx create-next-app@14.2.3 . \\n```\\n\u6216\u6700\u65b0\u7248\u672c\u3002\\n```\\nnpx create-next-app@latest .\\n```\\n\u9009\u62e9\u7684\u4e00\u4e9b\u914d\u7f6e\u3002\\n```\\n\u221a Would you like to use TypeScript? ...  Yes\\n\u221a Would you like to use ESLint? ...  Yes\\n\u221a Would you like to use Tailwind CSS? ... Yes\\n\u221a Would you like to use `src/` directory? ...  Yes\\n\u221a Would you like to use App Router? (recommended) ...  Yes\\n\u221a Would you like to customize the default import alias (@/*)? ... No\\n```\\n##### 1.2 \u521d\u59cb\u5316\u90e8\u5206\u6587\u4ef6\uff1a\\n```tsx\\n// src\\\\app\\\\page.tsx \\nexport default function Page() {\\n\xa0 return (\\n\xa0 \xa0 <div>\\n\xa0 \xa0 \xa0 Page\\n\xa0 \xa0 </div>\\n\xa0 )\\n}\\n```\\n\\n```css\\n/* src\\\\app\\\\globals.css */\\n@tailwind base;\\n@tailwind components;\\n@tailwind utilities;\\n```\\n### 2. \u6a21\u5757\u5b9e\u73b0\\n>  \u5bf9next.js\u9879\u76ee\u7ed3\u6784\u4e0d\u719f\u6089\u53ef\u4ee5\u67e5\u770b\u6587\u6863 [Project Structure](https://nextjs.org/docs/getting-started/project-structure)\u3002\\n>  \u5728\u7f16\u5199tailwindcss\u65f6\u63a8\u8350\u63d2\u4ef6\uff1aTailwind CSS IntelliSense\uff0cTailwind Snippets\u3002\\n##### 2.1 \u7ec4\u4ef6\u5316\uff1a\\n\u5c06\u54cd\u5e94\u5f0f\u5bb9\u5668\uff0c\u5934\u90e8\uff0c\u5e95\u90e8\u72ec\u7acb\u6210\u7ec4\u4ef6\uff0c\u521b\u5efa\u76ee\u5f55\u3002\\n```\\nsrc\\\\components\\\\container.tsx\\nsrc\\\\components\\\\header.tsx\\nsrc\\\\components\\\\footer.tsx\\n```\\n##### 2.2 \u5e03\u5c40\uff1a\\n```tsx\\n// src\\\\app\\\\layout.tsx\\nimport type { Metadata } from \\"next\\";\\nimport { Inter } from \\"next/font/google\\";\\nimport Header from \\"../components/header\\";\\nimport Footer from \\"../components/footer\\";\\nimport Container from \\"../components/container\\";\\nimport \\"./globals.css\\";\\n\\nconst inter = Inter({ subsets: [\\"latin\\"] }); //\u7f51\u9875\u5b57\u4f53\\n\\nexport const metadata: Metadata = { //\u9759\u6001\u5143\u6570\u636e\\n\xa0 title: \\"My Posts\\",\\n\xa0 description: \\"Generated by create next app\\",\\n};\\n\\nexport default function RootLayout({\\n\xa0 children,\\n}: Readonly<{\\n\xa0 children: React.ReactNode;\\n}>) {\\n\xa0 return (\\n\xa0 \xa0 <html lang=\\"en\\">\\n\xa0 \xa0 \xa0 <body className={`${inter.className} bg-zinc-100 text-zinc-900 `}>\\n\xa0 \xa0 \xa0 \xa0 <Container>\\n\xa0 \xa0 \xa0 \xa0 \xa0 <Header/>\\n\xa0 \xa0 \xa0 \xa0 \xa0 {children}\\n\xa0 \xa0 \xa0 \xa0 \xa0 <Footer/>\\n\xa0 \xa0 \xa0 \xa0 </Container>\\n\xa0 \xa0 \xa0 </body>\\n\xa0 \xa0 </html>\\n\xa0 );\\n}\\n```\\n##### 2.3 \u54cd\u5e94\u5f0f\u5bb9\u5668\uff1a\\n```tsx\\n// src\\\\component\\\\container.tsx\\nexport default function Container({ children }: Readonly<{ children: React.ReactNode }>) {\\n\xa0 \xa0 return (\\n\xa0 \xa0 \xa0 \xa0 <div className=\\"max-w-[1100px] mx-auto bg-white flex flex-col min-h-screen border-l border-r\\">\\n\xa0 \xa0 \xa0 \xa0 \xa0 \xa0 {children}\\n\xa0 \xa0 \xa0 \xa0 </div>\\n\xa0 \xa0 )\\n}\\n```\\n##### 2.4 \u9996\u9875\uff1a\\n```tsx\\n// src\\\\app\\\\page.tsx\\nexport default function Page() {\\n\xa0 return (\\n\xa0 \xa0 <main className=\\"text-center pt-32 px-5\\">\\n\xa0 \xa0 \xa0 <h1 className=\\"text-4xl md:text-5xl font-bold mb-5\\">\u6b22\u8fce\u6765\u5230\u6211\u7684\u535a\u5ba2\uff01</h1>\\n\xa0 \xa0 \xa0 <p className=\\"max-w-[750px] mx-auto leading-8\\">\\n\xa0 \xa0 \xa0 \xa0 Lorem ipsum dolor sit amet consectetur\\n\xa0 \xa0 \xa0 \xa0 adipisicing elit. Ducimus,a\\n\xa0 \xa0 \xa0 \xa0 natus? Dolores veritatis perferendis\\n\xa0 \xa0 \xa0 \xa0 non doloribus numquam praesentium\\n\xa0 \xa0 \xa0 \xa0 aliquid tempora qui similique,\\n\xa0 \xa0 \xa0 \xa0 exercitationem distinctio labore culpa\\n\xa0 \xa0 \xa0 \xa0 nam natus consequuntur rem!\\n\xa0 \xa0 \xa0 </p>\\n\xa0 \xa0 </main>\\n\xa0 )\\n}\\n```\\n##### 2.5 \u5e95\u90e8\uff1a\\n```tsx\\n// src\\\\component\\\\footer.tsx\\nexport default function Footer() {\\n\xa0 \xa0 return (\\n\xa0 \xa0 \xa0 \xa0 /* \u5f53\u524dFooter\u662f\u5728\u4e00\u4e2a\u5782\u76f4\u65b9\u5411\u7684Flexbox\u5bb9\u5668\u4e2d\uff0cmt-auto (margin-top:auto),\u53ef\u4ee5\u5c06footer\u63a8\u5230\u5bb9\u5668\u7684\u5e95\u90e8\u3002 */\\n\xa0 \xa0 \xa0 \xa0 <div className=\\"mt-auto text-center text-zinc-400 py-5 px-7 border-t\\">\\n\xa0 \xa0 \xa0 \xa0 \xa0 \xa0 <small>&copy; 2024. All Rights Reserved.</small>\\n\xa0 \xa0 \xa0 \xa0 </div>\\n\xa0 \xa0 )\\n}\\n```\\n##### 2.6 \u5934\u90e8\uff1a\\n>Image\u6807\u7b7e\u4e2dsrc\u653e\u7684\u5730\u5740\u53ef\u80fd\u4f1a\u51fa\u73b0==next-image-unconfigured-host==\u63d0\u793a\uff0c\u539f\u56e0\u5728next.js\u5b98\u65b9\u6587\u6863\u53ef\u4ee5\u627e\u5230[`next/image` Un-configured Host](https://nextjs.org/docs/messages/next-image-unconfigured-host)\uff0c\u89e3\u51b3\u65b9\u6cd5\u662f\u5728next.config.mjs\u4e2d\u589e\u52a0Image\u914d\u7f6e\u3002\\n\\n```js\\n// next.config.mjs\\n/** @type {import(\'next\').NextConfig} */\\nconst nextConfig = {\\n\xa0 \xa0 images: {\\n\xa0 \xa0 \xa0 \xa0 remotePatterns: [\\n\xa0 \xa0 \xa0 \xa0 \xa0 \xa0 {\\n\xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 protocol: \'https\',\\n\xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 hostname: \'bytegrad.com\'\\n\xa0 \xa0 \xa0 \xa0 \xa0 \xa0 }\\n\xa0 \xa0 \xa0 \xa0 ]\\n\xa0 \xa0 }\\n};\\nexport default nextConfig;\\n```\\n\\n```tsx\\n// src\\\\component\\\\header.tsx\\n\'use client\' //\u5f53\u524d\u9875\u9762\u662f\u5ba2\u6237\u7aef\u7ec4\u4ef6\\nimport Image from \\"next/image\\" //next.js\u63d0\u4f9b\u7684image\u7ec4\u4ef6\\nimport Link from \\"next/link\\"; //next.js\u63d0\u4f9b\u7684\u8def\u7531\u7ec4\u4ef6\\nimport { usePathname } from \\"next/navigation\\"; //\u901a\u8fc7usePathname\u83b7\u53d6\u5f53\u524d\u9875\u9762\u8def\u7531\u5730\u5740\\nconst navLinks = [\\n\xa0 \xa0 {\\n\xa0 \xa0 \xa0 \xa0 href: \'/\',\\n\xa0 \xa0 \xa0 \xa0 label: \'Home\'\\n\xa0 \xa0 },\\n\xa0 \xa0 {\\n\xa0 \xa0 \xa0 \xa0 href: \\"/posts\\",\\n\xa0 \xa0 \xa0 \xa0 label: \\"Posts\\"\\n\xa0 \xa0 },\\n\xa0 \xa0 {\\n\xa0 \xa0 \xa0 \xa0 href: \'/create-post\',\\n\xa0 \xa0 \xa0 \xa0 label: \\"Create post\\"\\n\xa0 \xa0 }\\n]\\nexport default function Header() {\\n\xa0 \xa0 const pathname = usePathname();\\n\xa0 \xa0 return (\\n\xa0 \xa0 \xa0 \xa0 <header className=\\"flex justify-between items-center py-4 \xa0px-7 border-b\\">\\n\xa0 \xa0 \xa0 \xa0 \xa0 \xa0 <Link href=\'/\'>\\n\xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 <Image\\n\xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 src=\\"https://bytegrad.com/course-assets/youtube/example-logo.png\\"\\n\xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 alt=\'logo\'\\n\xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 className=\\"w-[35px] h-[35px]\\"\\n\xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 width=\'35\'\\n\xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 height=\'35\'\\n\xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 />\\n\xa0 \xa0 \xa0 \xa0 \xa0 \xa0 </Link>\\n\xa0 \xa0 \xa0 \xa0 \xa0 \xa0 <nav>\\n\xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 <ul className=\\"flex gap-x-5 text-[14px]\\">\\n\xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 {\\n\xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 navLinks.map((link) => (\\n\xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 <li key={link.href}>\\n\xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 <Link\\n\xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 className={`font-bold ${pathname === link.href ? \'text-zinc-900\' : \\"text-zinc-400\\"\\n\xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 }`}\\n\xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 href={link.href}\\n\xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 >\\n\xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 {link.label}\\n\xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 </Link>\\n\xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 </li>\\n\xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 ))\\n\xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 }\\n\xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 </ul>\\n\xa0 \xa0 \xa0 \xa0 \xa0 \xa0 </nav>\\n\xa0 \xa0 \xa0 \xa0 </header>\\n\xa0 \xa0 )\\n}\\n```\\n### 3. Posts\u8be6\u60c5\u9875\\n##### 3.1 \u521b\u5efaposts\u9875\u9762\uff08\u6587\u6863 [Pages](https://nextjs.org/docs/app/building-your-application/routing/pages)\uff09\\n\u70b9\u51fb\u6807\u9898\u8fdb\u5165\u8be6\u60c5\u9875\u9762\u65f6\uff0c\u901a\u8fc7\u6807\u9898\u5bf9\u5e94\u7684id\u8fdb\u5165\u5230\u5b50\u8def\u7531\u9875\u9762 ``/posts/${post.id}``,\u6bcf\u6b21\u70b9\u51fb\u6807\u9898\u7684id\u90fd\u662f\u4e0d\u56fa\u5b9a\u7684\uff0c\u6240\u4ee5\u63a5\u4e0b\u6765\u9700\u8981\u7528\u5230\u52a8\u6001\u8def\u7531\u3002\\n```tsx\\n// src\\\\app\\\\posts\\\\page.tsx\\nimport Link from \\"next/link\\";\\n\\nexport default async function Posts() {\\n\xa0 \xa0 const response = await fetch(\'https:dummyjson.com/posts?limit=10\');\\n\xa0 \xa0 const { posts } = await response.json()\\n\xa0 \xa0 return (\\n\xa0 \xa0 \xa0 \xa0 <main className=\\"text-center pt-16 px-5\\">\\n\xa0 \xa0 \xa0 \xa0 \xa0 \xa0 <h1 className=\\"text-4xl md:text-5xl font-bold mb-5\\">all posts</h1>\\n\xa0 \xa0 \xa0 \xa0 \xa0 \xa0 <ul >\\n\xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 {posts.map((post: { id: number, title: string }) => (\\n\xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 <li key={post.id} className=\\"mb-3\\">\\n\xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 <Link href={`/posts/${post.id}`} className=\\"text-2xl font-bold\\">{post.title}</Link>\\n\xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 </li>\\n\xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 ))}\\n\xa0 \xa0 \xa0 \xa0 \xa0 \xa0 </ul>\\n\xa0 \xa0 \xa0 \xa0 </main>\\n\xa0 \xa0 )\\n}\\n\\n\\n```\\n##### 3.2 \u901a\u8fc7 [\u52a8\u6001\u8def\u7531](https://nextjs.org/docs/app/building-your-application/routing/dynamic-routes)\u8fdb\u5165post\u8be6\u60c5\\n```tsx \\n// src/app/posts/[id]/page.tsx\\nexport default async function Page({ params }: { params: { id: string } }) {\\n\xa0 \xa0 const response = await fetch(`https://dummyjson.com/posts/${params.id}`);\\n\xa0 \xa0 const post = await response.json();\\n\xa0 \xa0 return (\\n\xa0 \xa0 \xa0 \xa0 <main className=\\"px-7 pt-24 text-center\\">\\n\xa0 \xa0 \xa0 \xa0 \xa0 \xa0 <h1 className=\\"text-5xl font-semibold mb-7\\">{post.title}</h1>\\n\xa0 \xa0 \xa0 \xa0 \xa0 \xa0 <p className=\\"max-w-[700px] mx-auto\\">{post.body}</p>\\n\xa0 \xa0 \xa0 \xa0 </main>\\n\xa0 \xa0 )\\n}\\n```\\n\u8fd9\u6837\uff0c\u5c31\u53ef\u4ee5\u52a8\u6001\u83b7\u53d6\u5230\u6bcf\u4e2aposts\u6807\u9898\u5bf9\u5e94\u7684\u5185\u5bb9\u4e86\u3002\u6b64\u65f6\u4f1a\u6709\u4e00\u4e9b\u5c0f\u95ee\u9898\uff1a1.id\u4e0d\u5b58\u5728\u65f6\u5982\u4f55\u5904\u7406\u30022.\u8be6\u60c5\u9875\u9762\u6e32\u67d3\u7b49\u5f85\u65f6\u5361\u987f\u3002 \u4f18\u5316\uff1a\u52a0\u5165404\u9875\u9762\uff0cloading\u9875\u9762\u3002\\n```tsx\\n// src/app/posts/[id]/page.tsx\\nimport { notFound } from \\"next/navigation\\";\\nexport default async function Page({ params }: { params: { id: string } }) {\\n\\tawait new Promise((resolve) => setTimeout(resolve, 1000));//\u4e0d\u4f1a\u7acb\u5373\u5b8c\u6210\u3002\u4f1a\u7b49\u5f851\u79d2\u949f\u540e\u8c03\u7528resolve\u51fd\u6570\\n\xa0 \xa0 const response = await fetch(`https://dummyjson.com/posts/${params.id}`);\\n\xa0 \xa0 const post = await response.json();\\n\xa0 \xa0 //id\u4e0d\u5b58\u5728\uff0c\u8df3\u8f6c\u5230404\u9875\u9762\\n\xa0 \xa0 if (!post.id) { \\n\xa0 \xa0 \xa0 \xa0 notFound();\\n\xa0 \xa0 }\\n\xa0 \xa0 return (\\n\xa0 \xa0 \xa0 \xa0 <main className=\\"px-7 pt-24 text-center\\">\\n\xa0 \xa0 \xa0 \xa0 \xa0 \xa0 <h1 className=\\"text-5xl font-semibold mb-7\\">{post.title}</h1>\\n\xa0 \xa0 \xa0 \xa0 \xa0 \xa0 <p className=\\"max-w-[700px] mx-auto\\">{post.body}</p>\\n\xa0 \xa0 \xa0 \xa0 </main>\\n\xa0 \xa0 )\\n}\\n```\\n\\n```tsx\\n// src/app/posts/[id]/not-found.tsx\\nexport default function NotFound() {\\n\xa0 \xa0 return (\\n\xa0 \xa0 \xa0 \xa0 <div>\\n\xa0 \xa0 \xa0 \xa0 \xa0 \xa0 No post found for that id.\\n\xa0 \xa0 \xa0 \xa0 </div>\\n\xa0 \xa0 )\\n}\\n```\\n\\n```tsx\\n// src/app/posts/[id]/loading.tsx\\nexport default function Loading() {\\n\xa0 \xa0 return (\\n\xa0 \xa0 \xa0 \xa0 <div className=\\"text-center mt-5\\">\\n\xa0 \xa0 \xa0 \xa0 \xa0 \xa0 Loading...\\n\xa0 \xa0 \xa0 \xa0 </div>\\n\xa0 \xa0 )\\n}\\n```\\n\u6700\u540e\u5c06Posts\u4e2d\u6807\u9898\u5217\u8868\u72ec\u7acb\u6210\u5355\u72ec\u7684\u7ec4\u4ef6\u3002\\n```tsx\\n// src/components/posts-list.tsx\\nimport Link from \\"next/link\\";\\nexport default async function PostsList() {\\n\xa0 \xa0 const response = await fetch(\'https:dummyjson.com/posts?limit=10\');\\n\xa0 \xa0 const { posts } = await response.json()\\n\xa0 \xa0 return (\\n\xa0 \xa0 \xa0 \xa0 <ul >\\n\xa0 \xa0 \xa0 \xa0 \xa0 \xa0 {posts.map((post: { id: number, title: string }) => (\\n\xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 <li key={post.id} className=\\"mb-3\\">\\n\xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 <Link href={`/posts/${post.id}`} className=\\"text-2xl font-bold\\">{post.title}</Link>\\n\xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 </li>\\n\xa0 \xa0 \xa0 \xa0 \xa0 \xa0 ))}\\n\xa0 \xa0 \xa0 \xa0 </ul>\\n\xa0 \xa0 )\\n}\\n```\\n\\n```tsx\\n// src/app/posts/page.tsx\\nimport PostsList from \\"@/components/posts-list\\";\\nimport { Suspense } from \\"react\\";\\nexport default function Posts() {\\n\xa0 \xa0 return (\\n\xa0 \xa0 \xa0 \xa0 <main className=\\"text-center pt-16 px-5\\">\\n\xa0 \xa0 \xa0 \xa0 \xa0 \xa0 <h1 className=\\"text-4xl md:text-5xl font-bold mb-5\\">all posts</h1>\\n\xa0 \xa0 \xa0 \xa0 \xa0 \xa0 {/* \u5f53ui\u5c1a\u672a\u52a0\u8f7d\u65f6\u663e\u793aloading */}\\n\xa0 \xa0 \xa0 \xa0 \xa0 \xa0 <Suspense fallback=\\"Loading...\\">\\n\xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 <PostsList />\\n\xa0 \xa0 \xa0 \xa0 \xa0 \xa0 </Suspense>\\n\xa0 \xa0 \xa0 \xa0 </main>\\n\xa0 \xa0 )\\n}\\n```\\n##### 3.3 Create Post\u9875\u9762\\n```tsx\\n// src\\\\app\\\\create-post\\\\page.tsx\\nimport Form from \'@/components/form\';\\nexport default async function CreatePost() {\\n\xa0 \xa0 return (\\n\xa0 \xa0 \xa0 \xa0 <main className=\\"text-center pt-16\\">\\n\xa0 \xa0 \xa0 \xa0 \xa0 \xa0 <h1 className=\'text-4xl md:text-5xl font-bold mb-5\'>Create post</h1>\\n\xa0 \xa0 \xa0 \xa0 \xa0 \xa0 <Form />\\n\xa0 \xa0 \xa0 \xa0 </main>\\n\xa0 \xa0 )\\n}\\n```\\n\\n```tsx\\n// src\\\\components\\\\form.tsx\\nimport { createPost } from \\"@/actions/actions\\";\\nexport default function Form() {\\n\xa0 \xa0 return (\\n\xa0 \xa0 \xa0 \xa0 <form\\n\\t\xa0 \xa0 \xa0 \xa0 action={createPost}\\n\xa0 \xa0 \xa0 \xa0 \xa0 \xa0 className=\\"flex flex-col max-w-[400px] mx-auto space-x-2 gap-2 my-10\\"\\n\xa0 \xa0 \xa0 \xa0 >\\n\xa0 \xa0 \xa0 \xa0 \xa0 \xa0 <input\\n\xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 name=\\"title\\"\\n\xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 type=\'text\'\\n\xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 placeholder=\\"Title for new post\\"\\n\xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 className=\\"border rounded px-3 h-10\\"\\n\xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 required\\n\xa0 \xa0 \xa0 \xa0 \xa0 \xa0 />\\n\xa0 \xa0 \xa0 \xa0 \xa0 \xa0 <textarea\\n\xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 name=\\"body\\"\\n\xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 placeholder=\\"Body content for new post\\"\\n\xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 className=\\"border rounded px-3 py-2\\"\\n\xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 rows={6}\\n\xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 required\\n\xa0 \xa0 \xa0 \xa0 \xa0 \xa0 />\\n\xa0 \xa0 \xa0 \xa0 \xa0 \xa0 <button className=\\"h-10 bg-blue-500 px-5 rounded text-white\\">Submit</button>\\n\xa0 \xa0 \xa0 \xa0 </form>\\n\xa0 \xa0 )\\n}\\n```\\n### 4. \u7528[prisma](https://www.prisma.io/docs/orm/more/help-and-troubleshooting/help-articles/nextjs-prisma-client-dev-practices)\u6570\u636e\u5e93\u5b58\u653e\u6570\u636e\\n##### 4.1 \u5b89\u88c5prisma\\n\u5b89\u88c5\u4f9d\u8d56\u3002\\n```\\nnpm i prisma -save-dev\\n```\\n\u521d\u59cb\u5316\u6570\u636e\u5e93\u540e\u4f1a\u5728\u6839\u76ee\u5f55\u751f\u6210\u4e00\u4e2a `prisma`\u6587\u4ef6\u5939\u548c `.env`\u6587\u4ef6\u3002\\n```\\nnpx prisma init --datasource-provider sqlite\\n```\\n\u5b9a\u4e49\u4e00\u4e2aPost\u6a21\u578b\u3002\\n```prisma\\n// prisma\\\\schema.prisma\\n\\n// This is your Prisma schema file,\\n// learn more about it in the docs: https://pris.ly/d/prisma-schema\\n\\ngenerator client {\\n\xa0 provider = \\"prisma-client-js\\"\\n}\\n\\ndatasource db {\\n\xa0 provider = \\"sqlite\\"\\n\xa0 url \xa0 \xa0 \xa0= env(\\"DATABASE_URL\\")\\n}\\n\\n//\u5b9a\u4e49\u4e00\u4e2apost\u6a21\u578b\\nmodel Post {\\n\xa0 id \xa0 \xa0 \xa0 Int \xa0 \xa0 \xa0@id @default(autoincrement())\\n\xa0 title \xa0 \xa0String\\n\xa0 body \xa0 \xa0 String\\n\xa0 createAt DateTime @default(now())\\n\xa0 updateAt DateTime @updatedAt\\n}\\n```\\n\u66f4\u65b0\u6570\u636e\u5e93\uff0c\u6210\u529f\u540eprisma\u6587\u4ef6\u5939\u5185\u4f1a\u751f\u6210\u4e00\u4e2a`dev.db`\u6587\u4ef6\u3002\\n```\\nnpx prisma db push\\n```\\n\u67e5\u770b\u6570\u636e\u5e93UI\uff0c\u6210\u529f\u540e\u8fdb\u5165 http://localhost:5555 ,\u70b9\u51fbpost\u8fdb\u5165\u67e5\u770b\u521a\u624d\u521b\u5efa\u7684\u6570\u636e\u3002\\n```\\nnpx prisma studio\\n```\\n##### 4.2 \u4f7f\u7528prisma\\n\u5728actions\u4e2d\u914d\u7f6e\u8bf7\u6c42\u3002\\n```ts\\n// src\\\\actions\\\\actions.ts\\n\\"use server\\";//\u670d\u52a1\u7aef\u7ec4\u4ef6\\nimport prisma from \\"@/lib/db\\";\\nexport async function createPost(formData:FormData) {\\n\xa0 \xa0 console.log(\\"formData--\x3e\\",\\"title:\\",formData.get(\\"title\\"),\\"body:\\",formData.get(\\"body\\"))\\n\xa0 \xa0 const title = formData.get(\\"title\\") as string;\\n\xa0 \xa0 const body = formData.get(\\"body\\") as string;\\n\xa0 \xa0 await prisma.post.create({\\n\xa0 \xa0 \xa0 \xa0 data:{\\n\xa0 \xa0 \xa0 \xa0 \xa0 \xa0 title,\\n\xa0 \xa0 \xa0 \xa0 \xa0 \xa0 body\\n\xa0 \xa0 \xa0 \xa0 }\\n\xa0 \xa0 \xa0 })\\n}\\n```\\n\\n```ts\\n// src\\\\lib\\\\db.ts\\nimport { PrismaClient } from \'@prisma/client\'\\n\\nconst prismaClientSingleton = () => { // \u521b\u5efa\u4e00\u4e2a\u65b0\u7684 Prisma Client \u5b9e\u4f8b\uff0c\u4ee5\u4fbf\u540e\u7eed\u4e0e\u6570\u636e\u5e93\u4ea4\u4e92\u3002\\n\xa0 return new PrismaClient()\\n}\\n\\ndeclare const globalThis: {\\n\xa0 prismaGlobal: ReturnType<typeof prismaClientSingleton>;\\n} & typeof global;\\n\\nconst prisma = globalThis.prismaGlobal ?? prismaClientSingleton() // \u786e\u4fdd\u5728\u6574\u4e2a\u5e94\u7528\u7a0b\u5e8f\u4e2d\u53ea\u6709\u4e00\u4e2a Prisma Client \u5b9e\u4f8b\uff0c\u907f\u514d\u4e86\u591a\u4e2a\u5b9e\u4f8b\u540c\u65f6\u5b58\u5728\u5bfc\u81f4\u7684\u8fde\u63a5\u95ee\u9898\\n\\nexport default prisma\\n\\nif (process.env.NODE_ENV !== \'production\') globalThis.prismaGlobal = prisma // \u5982\u679c\u5f53\u524d\u73af\u5883\u4e0d\u662f\u751f\u4ea7\u73af\u5883\uff0c\u5219\u5c06 prisma \u5b9e\u4f8b\u8d4b\u503c\u7ed9 globalThis.prismaGlobal\\n```\\n\u6b64\u65f6\uff0c\u5728create post\u9875\u9762\u4e2d\u8f93\u5165\u5185\u5bb9\u5e76\u63d0\u4ea4\u540e\uff0c\u5728 http://localhost:5555 \u4e2d\u67e5\u770b\u6570\u636e\u662f\u5426\u5df2\u7ecf\u5199\u5165\u8fdbprisma\u3002\\n\u63a5\u4e0b\u6765\u5bf9posts-list\u5217\u8868\u9875\uff0cpost\u8be6\u60c5\u9875\u83b7\u53d6\u6570\u636e\u7684\u65b9\u6cd5\u8fdb\u884c\u6539\u9020\u3002\\n```tsx\\n// src\\\\components\\\\posts-list.tsx\\nimport prisma from \\"@/lib/db\\";\\nimport Link from \\"next/link\\";\\n\\nexport default async function PostsList() {\\n\xa0 \xa0 await new Promise((resolve) => setTimeout(resolve, 1000));\\n\xa0 \xa0 const posts = await prisma.post.findMany();\\n\xa0 \xa0 return (\\n\xa0 \xa0 \xa0 \xa0 <ul>\\n\xa0 \xa0 \xa0 \xa0 \xa0 \xa0 {posts.map((post) => (\\n\xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 <li key={post.id} className=\\"mb-3\\">\\n\xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 <Link href={`/posts/${post.id}`} >{post.title}</Link>\\n\xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 </li>\\n\xa0 \xa0 \xa0 \xa0 \xa0 \xa0 ))}\\n\xa0 \xa0 \xa0 \xa0 </ul>\\n\xa0 \xa0 )\\n}\\n```\\n\\n```tsx\\n// src\\\\app\\\\posts\\\\[id]\\\\page.tsx\\nimport prisma from \\"@/lib/db\\";\\nimport { notFound } from \\"next/navigation\\";\\nexport default async function Page({ params }: { params: { id: string } }) {\\n\xa0 \xa0 await new Promise((resolve) => setTimeout(resolve, 1000));//\u4e0d\u4f1a\u7acb\u5373\u5b8c\u6210\u3002\u4f1a\u7b49\u5f851\u79d2\u949f\u540e\u8c03\u7528resolve\u51fd\u6570\\n\xa0 \xa0 const post = await prisma.post.findUnique({\\n\xa0 \xa0 \xa0 \xa0 where: {\\n\xa0 \xa0 \xa0 \xa0 \xa0 \xa0 id: parseInt(params.id)\\n\xa0 \xa0 \xa0 \xa0 }\\n\xa0 \xa0 })\\n\xa0 \xa0 if (!post) {\\n\xa0 \xa0 \xa0 \xa0 notFound();\\n\xa0 \xa0 }\\n\xa0 \xa0 return (\\n\xa0 \xa0 \xa0 \xa0 <main className=\\"px-7 pt-24 text-center\\">\\n\xa0 \xa0 \xa0 \xa0 \xa0 \xa0 <h1 className=\\"text-5xl font-semibold mb-7\\">{post.title}</h1>\\n\xa0 \xa0 \xa0 \xa0 \xa0 \xa0 <p className=\\"max-w-[700px] mx-auto\\">{post.body}</p>\\n\xa0 \xa0 \xa0 \xa0 </main>\\n\xa0 \xa0 )\\n}\\n```\\n##### 4.3 \u4f18\u5316\u9875\u9762\u672a\u53ca\u65f6\u66f4\u65b0\\n\u6b64\u65f6\u6709\u4e00\u4e2a\u95ee\u9898\u9700\u8981\u89e3\u51b3\uff1a\u5f53\u5728create post\u4e2d\u521b\u5efa\u6570\u636e\u540e\uff0c\u5207\u6362\u5230posts\u9875\u9762\u65f6\uff0c\u6807\u9898\u5217\u8868\u4e2d\u7684\u6570\u636e\u6ca1\u6709\u66f4\u65b0\u5230\u6700\u65b0\u521b\u5efa\u7684\u6570\u636e\u3002[\u89e3\u51b3\u65b9\u6cd5](https://nextjs.org/docs/app/api-reference/functions/revalidatePath)\uff1a\u6bcf\u6b21\u8bbf\u95ee `/posts` \u8def\u7531\u65f6\u90fd\u5237\u65b0\u7f13\u5b58\u3002\\n```tsx\\n// src\\\\sctions\\\\actions.ts\\n\\"use server\\";//\u670d\u52a1\u7aef\u7ec4\u4ef6\\nimport prisma from \\"@/lib/db\\";\\nimport { revalidatePath } from \\"next/cache\\";\\n\\nexport async function createPost(formData:FormData) {\\n\xa0 \xa0 console.log(\\"formData--\x3e\\",\\"title:\\",formData.get(\\"title\\"),\\"body:\\",formData.get(\\"body\\"))\\n\xa0 \xa0 const title = formData.get(\\"title\\") as string;\\n\xa0 \xa0 const body = formData.get(\\"body\\") as string;\\n\xa0 \xa0 await prisma.post.create({\\n\xa0 \xa0 \xa0 \xa0 data:{\\n\xa0 \xa0 \xa0 \xa0 \xa0 \xa0 title,\\n\xa0 \xa0 \xa0 \xa0 \xa0 \xa0 body\\n\xa0 \xa0 \xa0 \xa0 }\\n\xa0 \xa0 \xa0 })\\n\xa0 \xa0 revalidatePath(\\"/posts\\")//\u8bbf\u95ee\u8be5\u8def\u7531\u7684\u65f6\u5019\u5237\u65b0\u7f13\u5b58\\n}\\n```\\n### 5. kinde\u6388\u6743\u767b\u5f55\\n##### 5.1 \u5b89\u88c5kinde\u548c\u914d\u7f6e\\n\u5982\u679c\u6211\u4eec\u5e0c\u671b\u767b\u5f55\u7684\u7528\u6237\u624d\u80fd\u8bbf\u95eecreate post\u9875\u9762\uff0c\u53ef\u4ee5\u7528[kinde](https://kinde.com)\u8fdb\u884c\u767b\u5f55\u6388\u6743\u3002[\u89c6\u9891\u6559\u7a0b 1:14:28](https://www.youtube.com/watch?v=y7JCnfbETPs)\\n```\\n1. \u70b9\u51fb start for free\\n2. \u70b9\u51fb add application\\n3. \u8f93\u5165\u9879\u76ee\u540d \u9009\u62e9 Back-end web \u540e save\\n4. Quick start \u9009\u62e9 Next.js \u540e save\\n5. \u70b9\u51fb Existing codebase \u540e\u770b\u5230 Set callback URL, Set logout URL \u70b9\u51fb Set\\n6. \u4e0b\u8f7d\u4f9d\u8d56 npm i @kinde-oss/kinde-auth-nextjs\\n7. \u7ee7\u7eed\u6eda\u52a8\u9875\u9762\u5230 Update environment vars \u590d\u5236\u7c98\u8d34\u5230\u6839\u90e8\u5f55\u4e0b.env.local\u4e2d,\u6ce8\u610f\uff1a\u672a\u907f\u514d\u6cc4\u9732\u4fe1\u606f\uff0c\u8bf7\u4e0d\u8981\u5c06\u73af\u5883\u53d8\u91cf\u4e2d\u7684\u4fe1\u606f\u63d0\u4ea4\uff1b\u68c0\u67e5.gitignore\u6587\u4ef6\\n8. \u7ee7\u7eed\u6eda\u52a8\u9875\u9762\u5230 API endpoints \u521b\u5efa\u76ee\u5f55 `src\\\\app\\\\api\\\\auth\\\\[kindeAuth]\\\\route.js`\\n9. \u9009\u62e9 Authentication \u9009\u62e9 Social connenctions \u4e2d \u767b\u5f55\u7684\u65b9\u5f0f \u540e save\\n```\\n\\n```\\nnpm i @kinde-oss/kinde-auth-nextjs\\n```\\n\\n```js\\n// src\\\\app\\\\api\\\\auth\\\\[kindeAuth]\\\\route.js\\nimport { handleAuth } from \\"@kinde-oss/kinde-auth-nextjs/server\\";\\nexport const GET = handleAuth();\\n```\\n##### 5.2 \u4f7f\u7528kinde\\n\u9700\u8981\u7528\u5230 [\u4e2d\u95f4\u4ef6](https://docs.kinde.com/developer-tools/sdks/backend/nextjs-prev-sdk/?r=search#protect-routes-using-middleware),\u5728\u6bcf\u6b21\u8bbf\u95ee `Create post` \u9875\u9762\u65f6\u9a8c\u8bc1\u662f\u5426\u6709\u767b\u5f55\u4fe1\u606f\u3002\\n```ts\\n// src\\\\middleware.ts\\n\\nimport {withAuth} from \\"@kinde-oss/kinde-auth-nextjs/middleware\\";\\nimport {NextRequest} from \'next/server\';\\n\\nexport default function middleware(req:NextRequest) { // \u5b9a\u4e49\u4e00\u4e2a\u4e2d\u95f4\u4ef6\u51fd\u6570\uff0c\u63a5\u6536\u8bf7\u6c42\u5bf9\u8c61 req\\n\xa0 return withAuth(req, {\\n\xa0 \xa0 isReturnToCurrentPage: true // \u8bbe\u7f6e\u9009\u9879\uff0c\u8868\u793a\u5728\u8ba4\u8bc1\u540e\u8fd4\u56de\u5f53\u524d\u9875\u9762\\n\xa0 });\\n}\\nexport const config = { // \u5bfc\u51fa\u914d\u7f6e\u5bf9\u8c61\\n\xa0 matcher: [\\"/create-post\\"]// \u8bbe\u7f6e\u5339\u914d\u8def\u5f84\uff0c\u53ea\u6709\u5f53\u8bf7\u6c42\u8def\u5f84\u4e3a \\"/create-post\\" \u65f6\u624d\u4f1a\u5e94\u7528\u8be5\u4e2d\u95f4\u4ef6\\n};\\n```\\n\u6bcf\u6b21`/create-post`\u9875\u9762\u53d1\u8d77\u8bf7\u6c42\u65f6\u8fdb\u884c\u9a8c\u8bc1\u662f\u5426\u767b\u5f55\u6388\u6743\u3002\\n```tsx\\n// src\\\\actions\\\\actions.ts\\n\\"use server\\";//\u670d\u52a1\u7aef\u7ec4\u4ef6\\nimport prisma from \\"@/lib/db\\";\\nimport { getKindeServerSession } from \\"@kinde-oss/kinde-auth-nextjs/server\\";\\nimport { revalidatePath } from \\"next/cache\\";\\nimport { redirect } from \\"next/navigation\\";\\n\\nexport async function createPost(formData:FormData) {\\n\xa0 \xa0 /* \u6bcf\u6b21\u53d1\u8d77\u8bf7\u6c42\u65f6\uff0c\u90fd\u8fdb\u884c\u9a8c\u8bc1\u662f\u5426\u6388\u6743 */\\n\xa0 \xa0 const {isAuthenticated} = getKindeServerSession();\\n\xa0 \xa0 if(!(await isAuthenticated())){\\n\xa0 \xa0 \xa0 \xa0 redirect(\\"/api/auth/login\\");\\n\xa0 \xa0 }\\n\xa0 \xa0 console.log(\\"formData--\x3e\\",\\"title:\\",formData.get(\\"title\\"),\\"body:\\",formData.get(\\"body\\"))\\n\xa0 \xa0 const title = formData.get(\\"title\\") as string;\\n\xa0 \xa0 const body = formData.get(\\"body\\") as string;\\n\xa0 \xa0 await prisma.post.create({\\n\xa0 \xa0 \xa0 \xa0 data:{\\n\xa0 \xa0 \xa0 \xa0 \xa0 \xa0 title,\\n\xa0 \xa0 \xa0 \xa0 \xa0 \xa0 body\\n\xa0 \xa0 \xa0 \xa0 }\\n\xa0 \xa0 \xa0 })\\n\xa0 \xa0 revalidatePath(\\"/posts\\")//\u8bbf\u95ee\u8be5\u8def\u7531\u7684\u65f6\u5019\u5237\u65b0\u7f13\u5b58\\n}\\n```\\n\u52a0\u5165logout\u6309\u94ae\u3002\\n```tsx\\n// src\\\\app\\\\create-post\\\\page.tsx\\nimport { LogoutLink } from \'@kinde-oss/kinde-auth-nextjs/components\';\\nimport Form from \'@/components/form\';\\n\\nexport default async function CreatePost() {\\n\xa0 \xa0 return (\\n\xa0 \xa0 \xa0 \xa0 <main className=\\"text-center pt-16\\">\\n\xa0 \xa0 \xa0 \xa0 \xa0 \xa0 <h1 className=\'text-4xl md:text-5xl font-bold mb-5\'>Create post</h1>\\n\xa0 \xa0 \xa0 \xa0 \xa0 \xa0 <Form />\\n\xa0 \xa0 \xa0 \xa0 \xa0 \xa0 <LogoutLink>logout</LogoutLink>\\n\xa0 \xa0 \xa0 \xa0 </main>\\n\xa0 \xa0 )\\n}\\n```\\n==(\u53ef\u5ffd\u7565)== \u5c06\u73af\u5883\u53d8\u91cf\u7edf\u4e00\u653e\u5165\u4e00\u4e2a\u6587\u4ef6\u5939\u5185\uff0c\u5c06 `.env.local` \u4e2d\u5185\u5bb9\u590d\u5236\u7c98\u8d34\u5230 `.env` \u4e2d\uff0c\u53ea\u4fdd\u7559 `.env` , \u6ce8\u610f\u8bf7\u5728.gitignore\u4e2d\u914d\u7f6e\u4e0d\u8981\u5c06.env\u6587\u4ef6\u63d0\u4ea4\u5230\u8fdc\u7a0b\u4ed3\u5e93\u3002\\n## \u4e8c. \u90e8\u7f72\u8fc7\u7a0b \\n>\u5c06\u4ee3\u7801\u90e8\u7f72\u5230 [vercel](https://vercel.com)\uff1a\u5148\u628a\u4ee3\u7801\u63d0\u4ea4\u5230github\u4ed3\u5e93\uff0c\u7136\u540e\u5728vercel\u4e2d\u5bfc\u5165\u9879\u76ee\u8fdb\u884c\u90e8\u7f72\u3002\uff08\u5728\u9996\u6b21\u90e8\u7f72\u7684\u8fc7\u7a0b\u4e2d\u4f1a\u51fa\u73b0\u4ee5\u4e0b\u95ee\u9898\u3002 [\u89c6\u9891\u6559\u7a0b1:56:10](https://www.youtube.com/watch?v=y7JCnfbETPs)\uff09\\n### 1.prisma\u6570\u636e\u5e93\u95ee\u9898\\n\u5728package.json\u4e2d `\\"scripts\\"` \u4e2d\u52a0\u5165\u3002\\n```\\n\\"postinstall\\":\\"prisma generate\\"\\n```\\n\u8fdb\u5165vercel\u4e2d\u521a\u624d\u5bfc\u5165\u7684\u9879\u76ee\uff0c\u9009\u62e9Storge,\u521b\u5efa\u4e00\u4e2a\u7528\u4e8e\u751f\u4ea7\u7684\u6570\u636e\u5e93\u3002\\n```\\n- \u9009\u62e9 Postgres  \u540e  Create\\n- Accept --\x3e Create \\n- \u8fdb\u5165\u65b0\u5efa\u7684\u6570\u636e\u5e93 \\n- \u9009\u62e9prisma  \u590d\u5236\u7c98\u8d34\u5230\u672c\u5730 schema.prisma \u4e2d\u66ff\u6362\u6389 datasource db \u5bf9\u5e94\u4ee3\u7801\\n- \u9009\u62e9.env.local \u590d\u5236\u7c98\u8d34\u5230\u672c\u5730 .env \u4e2d\u66ff\u6362\u6389 DATABASE_URL  \\n- \u7ec8\u7aef\u5c06\u6570\u636e\u5e93\u6a21\u578b\u540c\u6b65\u5230\u6570\u636e\u5e93 npx prisma db push \\n- \u518d\u6b21\u5c06\u4ee3\u7801\u63d0\u4ea4\u5230github\uff0c\u6b64\u65f6vercel\u4f1a\u81ea\u52a8\u90e8\u7f72\u521a\u624d\u63d0\u4ea4\u7684\u4ee3\u7801\u3002\u82e5\u6ca1\u6709\u81ea\u52a8\u90e8\u7f72\u4e5f\u53ef\u4ee5\u70b9\u8fdb\u9879\u76ee\u4e2d\u9009\u62e9Deployments \u9009\u62e9 Redeploy \u91cd\u65b0\u90e8\u7f72\uff0c\u7eff\u706f\u8868\u793a\u90e8\u7f72\u6210\u529f\\n```\\n### 2.\u73af\u5883\u53d8\u91cf\u95ee\u9898\\n\u5728\u9884\u89c8\u9879\u76ee\u662f\uff0c\u5207\u6362\u5230post\u9875\u9762\u53d1\u73b0\u6b64\u65f6postlist\u6570\u636e\u4e3a\u7a7a\uff0ccreate post\u9875\u9762\u6253\u4e0d\u5f00\uff0c\u53d1\u73b0\u5730\u5740\u8fd8\u662f\u672c\u5730\u7684\uff0c\u6240\u4ee5\u9700\u8981\u5c06URL\u5730\u5740\u66ff\u6362\u6210\u751f\u4ea7URL\u5730\u5740\u3002\\n```\\n- \u9009\u62e9 Project \u590d\u5236 Domains \u4e2d \u751f\u4ea7URL\u5730\u5740\\n- \u9009\u62e9 Settings \u9009\u62e9 Environment Variables\\n- \u9009\u62e9 KINDE_SITE_URL \u4fee\u6539 value \u66ff\u6362\u6210 https://\u4f60\u7684\u751f\u4ea7\u5730\u5740 \u540e SAVE\\n- \u9009\u62e9 KINDE_POST_LOGOUT_REDIRECT_URL \u4fee\u6539 value \u66ff\u6362\u6210 https://\u4f60\u7684\u751f\u4ea7\u5730\u5740 \u540e SAVE\\n- \u9009\u62e9 KINDE_POST_LOGIN_REDIRECT_URL \u4fee\u6539 value \u66ff\u6362\u6210 https://\u4f60\u7684\u751f\u4ea7\u5730\u5740/create-post \u540e SAVE\\n```\\n\u8fd8\u9700\u8981\u5728kinde\u4e2d\u914d\u7f6e\u9000\u51fa\u767b\u5f55\u540e\u91cd\u5b9a\u5411\u5730\u5740\u3002\\n```\\n- \u8fdb\u5165kinde\u4e2d\u4e4b\u524d\u5efa\u597d\u7684\u9879\u76ee\u5185\\n- \u9009\u62e9 Details\\n- \u6eda\u52a8\u81f3 Allowed callback URLs \u52a0\u5165\u5730\u5740 https://\u4f60\u7684\u751f\u4ea7\u5730\u5740/auth/kinde_callback \\n- \u6eda\u52a8\u81f3 Allowed logout redirect URLs \u52a0\u5165\u5730\u5740 https://\u4f60\u7684\u751f\u4ea7\u5730\u5740  \u540e SAVE\\n```\\n\\n\u6700\u540e\u518d\u90e8\u7f72\u4e00\u6b21\uff0c\u7b49\u5230Status\u53d8\u7eff\u540e\uff0c\u6b64\u65f6\u4f60\u5df2\u7ecf\u81ea\u5df1\u642d\u5efa\u5e76\u90e8\u7f72\u4e86\u4f60\u7684\u535a\u5ba2\ud83c\udf89\ud83c\udf89\ud83c\udf89"}]}}')}}]);